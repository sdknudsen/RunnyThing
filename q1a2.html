<!DOCTYPE html>
<html>
  <head>
    <title> Run Javascript!, Run! </title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.18.2/codemirror.css">
    <script src="epicsound.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.18.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.18.2/mode/javascript/javascript.min.js"></script>

    <!-- Stylesheets -->
    <link href="https://unpkg.com/basscss@8.0.2/css/basscss.min.css" rel="stylesheet">

    <!-- Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Bungee" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet">

  </head>
  <body style="background:#E6E4E1; font-family: 'Open Sans', sans-serif;">

    <div class="max-width-4 mx-auto">
      <div class="clearfix">
	<div class="col col-12">
	  <h1 class="h1 align-middle" style="font-family: 'Bungee', cursive;">
	    Runny Thing -- Versi√≥n Dos (A2)
	  </h1>
	</div>
	<div class="col col-12">
	  <button onclick="go();"> Go </button>
	  <button onclick="cleanup();"> Clear </button>
	  <button onclick="cleanupUser();"> Clear User Code </button>
	  <!-- <button onclick="readStart();"> Start </button> -->
	  <button onclick="readNext();"> Next </button>
	  <input type="checkbox" id="show_src"><label for="show_src">Show source</label>
	  <input type="checkbox" id="fast_go" checked><label for="fast_go">Clear output before go</label>
	</div>
      </div>
      <div class="clearfix">
	<div class="col col-6 p1">
	  <textarea class="left" id="source" style="display: table">/* user code */

	  </textarea>
	</div>
	<div class="col col-6 p1">
	  <p>Output:
	  <div id="output"></div>
	</div>
      </div>
      <div class="clearfix">
	<div class="col col-6 p1">
	  <textarea class="left" id="pre" style="display: table">
	    /* definitions */
	  </textarea>
	</div>
	<div class="col col-6 p1">
	  <textarea class="left" id="test" style="display: table">

/* Tests */


function test () {

var curr_grade = 0

var TSTART_sol = /^{{/;
var TEND_sol = /^}}/;
var DSTART_sol = /^{:/;
var DEND_sol = /^:}/;
var PSTART_sol = /^{{{/;
var PEND_sol = /^}}}/;

var TSTART_sol1 = /{{/;
var TEND_sol1 = /}}/;
var DSTART_sol1 = /{:/;
var DEND_sol1 = /:}/;
var PSTART_sol1 = /{{{/;
var PEND_sol1 = /}}}/;

var condPerfect = (String(TSTART) === String(TSTART_sol) &&
String(TEND) === String(TEND_sol) &&
String(DSTART) === String(DSTART_sol) &&
String(DEND) === String(DEND_sol) &&
String(PSTART) === String(PSTART_sol) &&
String(PEND) === String(PEND_sol))

var condAlmost = (String(TSTART) === String(TSTART_sol1) &&
String(TEND) === String(TEND_sol1) &&
String(DSTART) === String(DSTART_sol1) &&
String(DEND) === String(DEND_sol1) &&
String(PSTART) === String(PSTART_sol1) &&
String(PEND) === String(PEND_sol1))

test01 =
TSTART.test("{{") &&
TEND.test("}}") &&
PIPE.test("|") &&
DSTART.test("{:") &&
DEND.test(":}") &&
PSTART.test("{{{") &&
PEND.test("}}}")

test02 =
!TSTART.test("a{{") &&
!TEND.test("a}}") &&
!PIPE.test("a|") &&
!DSTART.test("a{:") &&
!DEND.test("a:}") &&
!PSTART.test("a{{{") &&
!PEND.test("a}}}")

test0 = test01 + test02;

var test1 = OUTERTEXT.test("{}{{");
var test2 = INNERTEXT.test("hello:{");
var test3 = INNERDTEXT.test("{");
var test4 = PNAME.test("}}");

var test5 = !OUTERTEXT.test("{{") &&
!OUTERTEXT.test("{:") &&
!INNERTEXT.test("{{") &&
!INNERTEXT.test("{:") &&
!INNERTEXT.test("{{{") &&
!INNERTEXT.test("|") &&
!INNERTEXT.test("}}") &&
!INNERDTEXT.test("{{") &&
!INNERDTEXT.test("{:") &&
!INNERDTEXT.test("{{{") &&
!INNERDTEXT.test("|") &&
!INNERDTEXT.test(":}") &&
!PNAME.test("|") &&
!PNAME.test("}}}");

var passes = "";
if(test0)
passes += "0, "
if(test1)
passes += "1, "
if(test2)
passes += "2, "
if(test3)
passes += "3, "
if(test4)
passes += "4, "
if(test5)
passes += "5"

curr_grade = test0 + (0+test1+test2+test3+test4)/2 + test5 * 2;
var strreturn = curr_grade + " // " + test0 + "/2, " + passes;
return strreturn;
}

test();

var TSTART = "";
var TEND = "";
var DSTART = "";
var DEND = "";
var PSTART = "";
var PEND = "";
var PIPE = "";
var PNAME = "";
var OUTERTEXT = "";
var INNERTEXT = "";
var INNERDTEXT = "";

	  </textarea>
    <!-- var cXXXr = realCXR; -->
    <!-- addTag("getCout = " + getCount, rt_output); -->
	</div>
      </div>
	<div class="col col-12">
	  <p> The execution is the result of concatenating the code in
	  the definition pane (i.e.:lower left pane), with the user
	    code in the top left pane, and finally the code in the test pane.
	    The idea is to speed up the grading.
	</div>
	<div class="col col-12">
	  <h3>Options</h3>
	  <input type="checkbox" id="mute_sound"><label for="mute_sound">Mute Sound</label>
	</div>
    </div>

    <script src="logic.js"></script>
</body>
</html>

<!-- function assert(condition, message) { -->
<!--     if (!condition) { -->
<!--         message = message || "Assertion failed"; -->
<!--         if (typeof Error !== "undefined") { -->
<!--             throw new Error(message); -->
<!--         } -->
<!--         throw message; // Fallback -->
<!--     } -->
<!-- } -->
<!-- ; -->


<!-- function test () { -->
<!--     var getCount = 0; -->
<!--     try { -->
<!--         var dict = addAA(addAA(constructAA(), "k", 3), "yass", 4001); -->
<!--         addTag("Construction +1", rt_output); -->
<!--     } catch (e) { addTag("Failed with: " + e.message, rt_output);  } -->
<!-- } -->

<!-- test() -->


<!-- if(TSTART === 'undefined' || -->
<!-- TEND === 'undefined' || -->
<!-- PIPE === 'undefined' || -->
<!-- OUTERTEXT === 'undefined' || -->
<!-- INNERTEXT === 'undefined' || -->
<!-- DSTART === 'undefined' || -->
<!-- DEND === 'undefined' || -->
<!-- INNERDTEXT === 'undefined' || -->
<!-- PSTART === 'undefined' || -->
<!-- PEND === 'undefined' || -->
<!-- PNAME === 'undefined') { -->
<!--     addTag("Undefined", rt_output); -->
<!-- } -->
